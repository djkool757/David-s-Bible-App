import 'package:http/http.dart' as http;

class BibleChapterService {
  static const String baseUrl = 'https://cdn.jsdelivr.net/gh/wldeh/bible-api/bibles';

  Future<String> getBibleChapter({
    String? translation,
    String? book,
    String? chapter,
    String? verse,
  }) async {
    translation = translation ?? 'en-kjv';
    book = book ?? 'genesis';
    chapter = chapter ?? '1';

    final url;
    
    if (verse != null ) {
      url = Uri.parse(
        '$baseUrl/$translation/books/$book/chapters/$chapter/verses/$verse.json',
      );
    } else { url = Uri.parse('$baseUrl/$translation/books/$book/chapters/$chapter.json',
    );
    }

    final response = await http.get(url);

    if (response.statusCode == 200) {
      return response.body;
    } else {
      throw Exception('Failed to load Bible chapter: $book $chapter:$verse');
    }
  }
}